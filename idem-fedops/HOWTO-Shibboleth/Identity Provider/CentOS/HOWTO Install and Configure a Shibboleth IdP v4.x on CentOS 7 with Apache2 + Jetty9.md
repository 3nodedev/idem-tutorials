# HOWTO Install and Configure a Shibboleth IdP v4.x on CentOS 7 with Apache2 + Jetty9

## Table of Contents

1. [Hardware Requirements](#hardware-requirements)
2. [Software that will be installed](#software-that-will-be-installed)
3. [Other Requirements](#other-requirements)
4. [Install Instructions](#install-instructions)
   1. [Install software requirements](#install-software-requirements)
   2. [Configure the environment](#configure-the-environment)
   3. [Install Jetty 9 Web Server](#install-jetty-9-web-server)
   4. [Install Shibboleth Identity Provider v4.x](#install-shibboleth-identity-provider-v4x)
5. [Configuration Instructions](#configuration-instructions)
   1. [Configure SSL on Apache2 (front-end of Jetty)](#configure-ssl-on-apache2-front-end-of-jetty)
   2. [Configure Jetty](#configure-jetty)
   3. [Configure Shibboleth Identity Provider StorageService (User Consent)](#configure-shibboleth-identity-provider-storageservice-user-consent)
      1. [Default (HTML Local Storage, Encryption GCM, No Database) - Recommended](#default-html-local-storage-encryption-gcm-no-database---recommended)
      2. [JPA Storage Service - using a database](#jpa-storage-service---using-a-database)
   4. [Configure Shibboleth Identity Provider to release the persistent-id](#configure-shibboleth-identity-provider-to-release-the-persistent-id)
      1. [Computed mode - Default & Recommended](#computed-mode---default--recommended)
      2. [Stored mode - using a database](#stored-mode---using-a-database)
   5. [Configure the Directory (openLDAP or AD) Connection](#configure-the-directory-openldap-or-ad-connection)
   6. [Configure the attribute resolution with Attribute Registry](#configure-the-attribute-resolution-with-attribute-registry)
   7. [Configure Shibboleth IdP Logging](#configure-shibboleth-idp-logging)
   8. [Translate IdP messages into the preferred language](#translate-idp-messages-into-preferred-language)
   9. [Disable SAML1 Deprecated Protocol](#disable-saml1-deprecated-protocol)
   10. [Configure Attribute Filters to release the mandatory attributes to the IDEM Default Resources](#configure-attribute-filters-to-release-the-mandatory-attributes-to-the-idem-default-resources)
   11. [Register the IdP on the IDEM Test Federation](#register-the-idp-on-the-idem-test-federation)
6. [Appendix A: Configure Attribute Filters to release the mandatory attributes to the IDEM Production Resources](#appendix-a-configure-attribute-filters-to-release-the-mandatory-attributes-to-the-idem-production-resources)
7. [Appendix B: Configure attribute filter policies for the REFEDS Research and Scholarship and the GEANT Data Protection Code of Conduct Entity Categories](#appendix-b-configure-attribute-filter-policies-for-the-refeds-research-and-scholarship-and-the-geant-data-protection-code-of-conduct-entity-categories)
8. [Appendix C: Import persistent-id from a previous database](#appendix-c-import-persistent-id-from-a-previous-database)
9. [Appendix D: Useful logs to find problems](#appendix-d-useful-logs-to-find-problems)
10. [Utilities](#utilities)
11. [Useful Documentation](#useful-documentation)
12. [Authors](#authors)
    * [Original Author](#original-author)
